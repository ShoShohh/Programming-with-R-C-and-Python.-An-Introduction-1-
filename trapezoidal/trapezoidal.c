/*
参考ウェブページURL：https://qiita.com/stmtk/items/0d43372950fe3ee674be#:~:text=%25E6%2595%25B0%25E5%2580%25A4%25E8%25A8%2588%25E7%25AE%2597%2520C%25E8%25A8%2580%25E8%25AA%259E%2520%25E5%258F%25B0%25E5%25BD%25A2%25E5%2585%25AC%25E5%25BC%258F%25E3%2581%25A8%25E3%2581%25AF%2520%25E4%25B8%258B%25E3%2581%25AE%25E7%25B5%25B5%25E3%2581%25AE%25E9%259D%2592%25E3%2581%2584%25E7%25B7%259A%25E3%2581%258C%25E3%2581%258C%25E7%25A9%258D%25E5%2588%2586%25E3%2581%2597%25E3%2581%259F%25E3%2581%2584%25E9%2596%25A2%25E6%2595%25B0%25E3%2581%25AE%25E3%2582%25B0%25E3%2583%25A9%25E3%2583%2595%25E3%2580%2581a%25E3%2581%258B%25E3%2582%2589b%25E3%2581%25BE%25E3%2581%25A7%25E3%2582%2592%25E7%25A9%258D%25E5%2588%2586%25E3%2581%2597%25E3%2581%259F%25E3%2581%2584%25E7%25AF%2584%25E5%259B%25B2%2520%2528%25E5%25B7%25A6%25E3%2581%25AE%25E8%258C%25B6%25E8%2589%25B2%25E3%2581%25AE%25E7%25B7%259A%25E3%2581%258B%25E3%2582%2589%25E5%258F%25B3%25E8%258C%25B6%25E8%2589%25B2%25E3%2581%25AE%25E7%25B7%259A%25EF%25BC%2589%25E3%2581%25A0%25E3%2581%25A8%25E6%2580%259D%25E3%2581%25A3%25E3%2581%25A6%25E3%2581%258F%25E3%2581%25A0%25E3%2581%2595%25E3%2581%2584%25E3%2580%2582%2520%25E5%258F%25B0%25E5%25BD%25A2%25E5%2585%25AC%25E5%25BC%258F%25E3%2581%25A8%25E3%2581%25AF%25E7%25B7%2591%25E3%2581%25A8%25E9%25BB%2584%25E8%2589%25B2%25E3%2581%25AE%25E9%2583%25A8%25E5%2588%2586%25E3%2581%25AE%25E9%259D%25A2%25E7%25A9%258D%25E3%2582%2592%25E7%25A9%258D%25E5%2588%2586%25E3%2581%2597%25E3%2581%259F%25E5%2580%25A4%25E3%2581%25A0%25E3%2581%25A8%25E8%2580%2583%25E3%2581%2588%25E3%2582%258B%25E3%2581%2593%25E3%2581%25A8%25E3%2581%25A7%25E3%2581%2599%25E3%2580%2582%2520%25E3%2581%259D%25E3%2581%25AE%25E5%2580%25A4%25E3%2581%25AF%2520%2528,%2528%2520b%2520%25E2%2588%2592%2520c%2529%25202%2520%25E3%2581%25AB%25E3%2581%25AA%25E3%2582%258A%25E3%2581%25BE%25E3%2581%2599%25E3%2581%25AD%25E3%2580%2582%2520%25E3%2581%2599%25E3%2582%258B%25E3%2581%25A8%25E3%2581%25A4%25E3%2581%2584%25E3%2581%2595%25E3%2581%25A3%25E3%2581%258D%25E3%2581%25AE%25E5%259B%25B3%25E3%2582%2588%25E3%2582%258A%25E7%25B7%2591%25E8%2589%25B2%25E3%2581%25AE%25E9%2583%25A8%25E5%2588%2586%25E3%2581%258C%25E6%25B8%259B%25E3%2581%25A3%25E3%2581%25A6%25E3%2581%2584%25E3%2582%258B%25E3%2581%25AE%25E3%2581%258C%25E3%2582%258F%25E3%2581%258B%25E3%2582%258A%25E3%2581%25BE%25E3%2581%2599%25E3%2580%2582%2520%25E3%2581%2593%25E3%2582%258C%25E3%2581%258C%25E5%258F%25B0%25E5%25BD%25A2%25E5%2585%25AC%25E5%25BC%258F%25E3%2581%25A7%25E3%2581%2599%25E3%2580%2582
工夫したところ：まず，定積分の上底と下底を操作しやすいようにdefineで定義した．次に，定積分の数値近似解を求めたい関数も操作しやすいようにmain関数ではなくて関数fとして定義した．
分割数を入力する度にプログラムが終了しないように，main関数では入力者の意思で分割数の入力と数値近似解の導出を何度も行えるようにした．
つまり，台形公式を用いて定積分の数値近似解を求める関数をapprox関数としてmain関数とは別に定義し，main関数で呼び出すような形にしている．
*/

#include <stdio.h>
#include <math.h> /* 円周率や三角関数を用いるためにライブラリを宣言 */

#define a 0            /* 定積分の下限 */
#define b ((M_PI) / 2) /* 定積分の上限 */

/* 定積分の数値近似解を求めたい関数 */
double f(double x){
    return  ((cos(x)) * (cos(x)));
}

/* 台形公式を用いて，入力された分割数で定積分の数値近似解を求める関数 */
void approx(){
    double sum = 0; /* 各区間での台形の面積を代入する変数 */
    int n;  /* 分割数を代入する変数 */
    printf("Input a number of divisions n. :"); /* 分割数を標準入力させる． */
    scanf("%d", &n);
    
    double h = (b - a) / n; /* n等分した区間の幅 */

    /* sumに各区間での台形の上底と下底の和を代入する． */
    for(double x = a; x <= b; x += h){
        sum += (f(x) + f(x+h));
    }
    sum *= (h / 2); /* 上底と下底の和に(区間の幅/2)を掛ける．これで台形の面積が求まる． */

    printf("%lf\n", sum); /* 近似の答えを標準出力する． */
}

int main(){
    int check = 1;

    while(check == 1){
        approx();
        /* 異なる分割数でもう一度計算したい場合は'1'を，もう終わりでいい場合は'0'を入力させる． */
        printf("If you want to recalculate, enter '1'; if not, enter '0'. :");
        scanf("%d", &check);
        printf("\n");
    } 
    return 0;
}